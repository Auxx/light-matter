@let state = state$ | async;

@if (state) {
  @if (state.isValid) {
    <div class="image-container" [class]="fit()">
      <img #image
           [alt]="state.selectedFile | fileName"
           [style.zoom]="zoom()"
           [src]="state.selectedFileUrl"
           (dblclick)="toggleFullScreen()" />
    </div>

    <app-image-view-toolbar [fileName]="state.selectedFile"
                            [imageElement]="imageSize()"
                            [fit]="fit()"
                            [prev]="state.prev"
                            [next]="state.next"
                            [isFullScreen]="isFullScreen()"
                            (fitChange)="fit.set($event)"
                            (navigatePrev)="viewNavigator.prev()"
                            (navigateNext)="viewNavigator.next()"
                            (toggleFullScreen)="toggleFullScreen()" />
  } @else {
    <div>Invalid state</div>
  }
}
